# Nginx rate limit zones 설정
# 이 파일의 내용을 /etc/nginx/nginx.conf의 http 블록 안에 추가하세요
# 또는 /etc/nginx/conf.d/rate-limit.conf로 저장하고 nginx.conf에서 include

# 정품 인증 토큰 경로 rate limit (분당 3회 ≈ 15분당 45회, burst 10)
# 참고: Nginx 1.19.7 미만은 r/h 미지원, r/m 사용
limit_req_zone $binary_remote_addr zone=auth_token:10m rate=3r/m;

# 관리자 다운로드 rate limit (분당 1회 ≈ 15분당 15회, burst 2)
limit_req_zone $binary_remote_addr zone=admin_download:10m rate=1r/m;

# 배포 웹훅 rate limit (15분당 10회, burst 3)
# GitHub webhook은 보통 push당 1회이므로 충분함
limit_req_zone $binary_remote_addr zone=deploy_webhook:10m rate=10r/15m;

