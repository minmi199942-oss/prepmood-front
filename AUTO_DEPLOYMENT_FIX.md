# ìë™ ë°°í¬ ë¬¸ì œ í•´ê²° ê°€ì´ë“œ

## ğŸ” ì§„ë‹¨ ê²°ê³¼

1. âœ… ì›¹í›… ì •ìƒ ì‘ë™ (ì—¬ëŸ¬ ë²ˆ ìˆ˜ì‹ ë¨)
2. âŒ ë°°í¬ ìŠ¤í¬ë¦½íŠ¸ ì‹¤í–‰ ê¶Œí•œ ì—†ìŒ
3. âŒ ë°°í¬ëœ ì½”ë“œì— êµ¬ë¬¸ ì˜¤ë¥˜ (paid-event-creator.js 180ë²ˆ ë¼ì¸)

## ğŸ› ï¸ í•´ê²° ë°©ë²•

### 1ë‹¨ê³„: ë°°í¬ ìŠ¤í¬ë¦½íŠ¸ ì‹¤í–‰ ê¶Œí•œ ë¶€ì—¬

```bash
chmod +x /root/prepmood-repo/deploy.sh
```

### 2ë‹¨ê³„: ë°°í¬ ë¡œê·¸ ìƒì„¸ í™•ì¸

```bash
# ì „ì²´ ë°°í¬ ë¡œê·¸ í™•ì¸
tail -n 100 /var/www/html/backend/deploy-run.log

# íŒŒì¼ ë™ê¸°í™” ë¶€ë¶„ í™•ì¸
grep -A 20 "íŒŒì¼ ë™ê¸°í™”" /var/www/html/backend/deploy-run.log
```

### 3ë‹¨ê³„: Git ì €ì¥ì†Œì™€ ë°°í¬ëœ ì½”ë“œ ë¹„êµ

```bash
# Git ì €ì¥ì†Œì˜ íŒŒì¼ í™•ì¸
cat /root/prepmood-repo/backend/utils/paid-event-creator.js | sed -n '175,185p'

# ë°°í¬ëœ íŒŒì¼ í™•ì¸
cat /var/www/html/backend/utils/paid-event-creator.js | sed -n '175,185p'

# ë‘ íŒŒì¼ì´ ë‹¤ë¥´ë©´ ë™ê¸°í™” ë¬¸ì œ
```

### 4ë‹¨ê³„: ìˆ˜ë™ ë™ê¸°í™” (í•„ìš”ì‹œ)

```bash
# Git ì €ì¥ì†Œì—ì„œ ìµœì‹  ì½”ë“œ ê°€ì ¸ì˜¤ê¸°
cd /root/prepmood-repo
git pull origin main

# ë°°í¬ ìŠ¤í¬ë¦½íŠ¸ ìˆ˜ë™ ì‹¤í–‰
bash deploy.sh
```

### 5ë‹¨ê³„: íŒŒì¼ ì§ì ‘ ìˆ˜ì • (ê¸´ê¸‰ ì¡°ì¹˜)

ë°°í¬ê°€ ê³„ì† ì‹¤íŒ¨í•˜ëŠ” ê²½ìš° ì§ì ‘ ìˆ˜ì •:

```bash
cd /var/www/html/backend/utils

# ë°±ì—…
cp paid-event-creator.js paid-event-creator.js.backup

# 180-193ë²ˆ ë¼ì¸ ì‚­ì œ
sed -i '180,193d' paid-event-creator.js

# 179ë²ˆ ë¼ì¸ ë‹¤ìŒì— ìƒˆ ì½”ë“œ ì¶”ê°€
cat >> paid-event-creator.js << 'EOF'
    
    // ëª¨ë“  ì¬ì‹œë„ ì‹¤íŒ¨ (ì´ ì½”ë“œëŠ” ë„ë‹¬í•˜ì§€ ì•Šì•„ì•¼ í•˜ì§€ë§Œ ë°©ì–´ ì½”ë“œ)
    throw new Error('paid_events ìƒì„± ì‹¤íŒ¨: ëª¨ë“  ì¬ì‹œë„ ì‹¤íŒ¨');
EOF

# í™•ì¸
sed -n '175,185p' paid-event-creator.js

# PM2 ì¬ì‹œì‘
pm2 restart prepmood-backend
```

## ğŸ” ë°°í¬ ìŠ¤í¬ë¦½íŠ¸ íŒŒì¼ ë™ê¸°í™” ë¶€ë¶„ í™•ì¸

`deploy.sh`ì˜ íŒŒì¼ ë™ê¸°í™” ë¶€ë¶„ì„ í™•ì¸í•´ì•¼ í•©ë‹ˆë‹¤:

```bash
# deploy.shì˜ rsync ë¶€ë¶„ í™•ì¸
grep -A 30 "rsync\|ë™ê¸°í™”" /root/prepmood-repo/deploy.sh
```

## ğŸ“‹ ì²´í¬ë¦¬ìŠ¤íŠ¸

- [ ] ë°°í¬ ìŠ¤í¬ë¦½íŠ¸ ì‹¤í–‰ ê¶Œí•œ ë¶€ì—¬
- [ ] ë°°í¬ ë¡œê·¸ í™•ì¸ (íŒŒì¼ ë™ê¸°í™” ì„±ê³µ ì—¬ë¶€)
- [ ] Git ì €ì¥ì†Œì™€ ë°°í¬ëœ íŒŒì¼ ë¹„êµ
- [ ] í•„ìš”ì‹œ ìˆ˜ë™ ë™ê¸°í™” ë˜ëŠ” ì§ì ‘ ìˆ˜ì •
- [ ] PM2 ì¬ì‹œì‘ í›„ ì„œë²„ ì •ìƒ ì‘ë™ í™•ì¸
