# ğŸ›’ ìƒí’ˆ ê´€ë¦¬ ì‹œìŠ¤í…œ ì„¤ì¹˜ ê°€ì´ë“œ

**ì‘ì„±ì¼**: 2025ë…„ 10ì›” 12ì¼

---

## ğŸ“‹ **ì„¤ì¹˜ ë‹¨ê³„**

### **Step 1: VPSì— ì ‘ì†**

```bash
ssh root@prepmood.kr
cd /var/www/html
```

---

### **Step 2: ìµœì‹  ì½”ë“œ ê°€ì ¸ì˜¤ê¸°**

```bash
git pull origin main
```

---

### **Step 3: multer íŒ¨í‚¤ì§€ ì„¤ì¹˜**

```bash
cd backend
npm install multer
```

---

### **Step 4: ë°ì´í„°ë² ì´ìŠ¤ í…Œì´ë¸” ìƒì„±**

```bash
mysql -u prepmood_user -p prepmood < backend/setup_products_table.sql
```

**ë¹„ë°€ë²ˆí˜¸ ì…ë ¥ í›„ í™•ì¸**:
```sql
mysql -u prepmood_user -p
use prepmood;
SHOW TABLES;
DESC products;
```

---

### **Step 5: í™˜ê²½ ë³€ìˆ˜ ì¶”ê°€**

`.env` íŒŒì¼ì— ê´€ë¦¬ì í‚¤ ì¶”ê°€:

```bash
nano backend/.env
```

íŒŒì¼ ëì— ë‹¤ìŒ ì¤„ ì¶”ê°€:
```
ADMIN_KEY=your-secret-admin-key-here-change-this
```

**âš ï¸ ì£¼ì˜**: `your-secret-admin-key-here-change-this`ë¥¼ **ê°•ë ¥í•œ ë¹„ë°€ë²ˆí˜¸**ë¡œ ë³€ê²½í•˜ì„¸ìš”!

ì˜ˆì‹œ:
```
ADMIN_KEY=PrepmoodAdmin2025!SecureKey#XYZ
```

ì €ì¥: `Ctrl + O` â†’ `Enter` â†’ `Ctrl + X`

---

### **Step 6: ë°±ì—”ë“œ ì¬ì‹œì‘**

```bash
cd /var/www/html
pm2 restart prepmood-backend
pm2 logs prepmood-backend --lines 20
```

**í™•ì¸ ì‚¬í•­**:
- âŒ ì˜¤ë¥˜ ë©”ì‹œì§€ê°€ ì—†ëŠ”ì§€
- âœ… `ğŸš€ ì„œë²„ê°€ í¬íŠ¸ 3000ì—ì„œ ì‹¤í–‰ ì¤‘ì…ë‹ˆë‹¤.` ë©”ì‹œì§€ í™•ì¸

---

## ğŸ¨ **ì‚¬ìš© ë°©ë²•**

### **1. ê´€ë¦¬ì í˜ì´ì§€ ì ‘ì†**

```
https://prepmood.kr/admin/products.html
```

### **2. ê´€ë¦¬ì í‚¤ ì…ë ¥**

ìµœì´ˆ ì ‘ì† ì‹œ í”„ë¡¬í”„íŠ¸ê°€ ë‚˜íƒ€ë‚˜ë©´:
- `.env` íŒŒì¼ì— ì„¤ì •í•œ `ADMIN_KEY` ì…ë ¥
- **ë¸Œë¼ìš°ì €ì— ì €ì¥ë¨** (LocalStorage)

### **3. ìƒí’ˆ ê´€ë¦¬**

#### **ìƒˆ ìƒí’ˆ ì¶”ê°€**:
1. [+ ìƒˆ ìƒí’ˆ ì¶”ê°€] ë²„íŠ¼ í´ë¦­
2. í¼ ì‘ì„±:
   - **ìƒí’ˆ ID**: `m-sh-010` (í˜•ì‹: {gender}-{category}-{number})
   - **ìƒí’ˆëª…**: ì‹¤ì œ ìƒí’ˆëª…
   - **ê°€ê²©**: ìˆ«ìë§Œ ì…ë ¥ (ì˜ˆ: 129000)
   - **ì´ë¯¸ì§€**: ì´ë¯¸ì§€ íŒŒì¼ ì„ íƒ (JPEG, PNG, GIF, WebP, ìµœëŒ€ 5MB)
   - **ì„±ë³„**: ë‚¨ì„±/ì—¬ì„±
   - **ì¹´í…Œê³ ë¦¬**: ìƒì˜, í•˜ì˜, ì•„ìš°í„°, ê°€ë°©, ì•¡ì„¸ì„œë¦¬
   - **íƒ€ì…**: ì¹´í…Œê³ ë¦¬ì— ë”°ë¼ ìë™ ì—…ë°ì´íŠ¸
   - **ì„¤ëª…**: ì„ íƒ ì‚¬í•­
3. [ì €ì¥] í´ë¦­

#### **ê¸°ì¡´ ìƒí’ˆ ìˆ˜ì •**:
1. ìƒí’ˆ ì¹´ë“œì—ì„œ [ìˆ˜ì •] ë²„íŠ¼ í´ë¦­
2. ì •ë³´ ìˆ˜ì •
3. [ì €ì¥] í´ë¦­

#### **ìƒí’ˆ ì‚­ì œ**:
1. ìƒí’ˆ ì¹´ë“œì—ì„œ [ì‚­ì œ] ë²„íŠ¼ í´ë¦­
2. í™•ì¸ ë©”ì‹œì§€ì—ì„œ [í™•ì¸] í´ë¦­

---

## ğŸ”— **API ì—”ë“œí¬ì¸íŠ¸**

### **ê³µê°œ API (ì¸ì¦ ë¶ˆí•„ìš”)**:
```
GET /api/products              - ì „ì²´ ìƒí’ˆ ëª©ë¡
GET /api/products/:id          - íŠ¹ì • ìƒí’ˆ ì¡°íšŒ
```

### **ê´€ë¦¬ì API (X-Admin-Key í—¤ë” í•„ìš”)**:
```
POST   /api/admin/products          - ìƒí’ˆ ì¶”ê°€
PUT    /api/admin/products/:id      - ìƒí’ˆ ìˆ˜ì •
DELETE /api/admin/products/:id      - ìƒí’ˆ ì‚­ì œ
POST   /api/admin/upload-image      - ì´ë¯¸ì§€ ì—…ë¡œë“œ
```

---

## ğŸ“ **íŒŒì¼ êµ¬ì¡°**

```
project-root/
â”œâ”€â”€ admin/
â”‚   â”œâ”€â”€ products.html           # ê´€ë¦¬ì í˜ì´ì§€
â”‚   â””â”€â”€ admin-products.js       # ê´€ë¦¬ì í˜ì´ì§€ ìŠ¤í¬ë¦½íŠ¸
â”œâ”€â”€ assets/
â”‚   â””â”€â”€ css/
â”‚       â””â”€â”€ admin.css           # ê´€ë¦¬ì í˜ì´ì§€ ìŠ¤íƒ€ì¼
â”œâ”€â”€ backend/
â”‚   â”œâ”€â”€ product-routes.js       # ìƒí’ˆ API ë¼ìš°íŠ¸
â”‚   â”œâ”€â”€ setup_products_table.sql # DB í…Œì´ë¸” ìƒì„± ìŠ¤í¬ë¦½íŠ¸
â”‚   â””â”€â”€ uploads/
â”‚       â””â”€â”€ products/           # ì—…ë¡œë“œëœ ì´ë¯¸ì§€ ì €ì¥ (ìë™ ìƒì„±)
```

---

## ğŸ” **ë³´ì•ˆ**

### **ê´€ë¦¬ì í‚¤ ê´€ë¦¬**:
- âœ… `.env` íŒŒì¼ì— ì €ì¥ (Gitì— ì»¤ë°‹ë˜ì§€ ì•ŠìŒ)
- âœ… ê°•ë ¥í•œ ë¹„ë°€ë²ˆí˜¸ ì‚¬ìš© ê¶Œì¥
- âœ… ì •ê¸°ì ìœ¼ë¡œ ë³€ê²½

### **ì´ë¯¸ì§€ ì—…ë¡œë“œ**:
- âœ… íŒŒì¼ íƒ€ì… ê²€ì¦ (JPEG, PNG, GIF, WebPë§Œ í—ˆìš©)
- âœ… íŒŒì¼ í¬ê¸° ì œí•œ (5MB)
- âœ… ì„œë²„ì— ì•ˆì „í•˜ê²Œ ì €ì¥

---

## ğŸ› **ë¬¸ì œ í•´ê²°**

### **"ê´€ë¦¬ì ê¶Œí•œì´ í•„ìš”í•©ë‹ˆë‹¤" ì˜¤ë¥˜**:
1. `.env` íŒŒì¼ì— `ADMIN_KEY` ì¶”ê°€ í™•ì¸
2. ë°±ì—”ë“œ ì¬ì‹œì‘: `pm2 restart prepmood-backend`
3. ë¸Œë¼ìš°ì €ì—ì„œ LocalStorage ì‚­ì œ:
   - F12 â†’ Application â†’ Local Storage â†’ `adminKey` ì‚­ì œ
   - í˜ì´ì§€ ìƒˆë¡œê³ ì¹¨

### **ì´ë¯¸ì§€ ì—…ë¡œë“œ ì‹¤íŒ¨**:
1. íŒŒì¼ í˜•ì‹ í™•ì¸ (JPEG, PNG, GIF, WebPë§Œ í—ˆìš©)
2. íŒŒì¼ í¬ê¸° í™•ì¸ (5MB ì´í•˜)
3. `backend/uploads/products/` í´ë” ê¶Œí•œ í™•ì¸:
   ```bash
   sudo chmod -R 755 /var/www/html/backend/uploads
   ```

### **ìƒí’ˆì´ ì‚¬ì´íŠ¸ì— í‘œì‹œë˜ì§€ ì•ŠìŒ**:
- ì•„ì§ í”„ë¡ íŠ¸ì—”ë“œë¥¼ DB ì—°ë™ìœ¼ë¡œ ë³€ê²½í•˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤.
- ë‹¤ìŒ ë‹¨ê³„ì—ì„œ `catalog-data.js`ë¥¼ DBì—ì„œ ë°ì´í„°ë¥¼ ê°€ì ¸ì˜¤ë„ë¡ ìˆ˜ì •í•  ì˜ˆì •ì…ë‹ˆë‹¤.

---

## âœ… **ë‹¤ìŒ ë‹¨ê³„**

1. âœ… ë°ì´í„°ë² ì´ìŠ¤ í…Œì´ë¸” ìƒì„±
2. âœ… ë°±ì—”ë“œ API êµ¬í˜„
3. âœ… ê´€ë¦¬ì í˜ì´ì§€ ì œì‘
4. â³ í”„ë¡ íŠ¸ì—”ë“œë¥¼ DB ì—°ë™ìœ¼ë¡œ ë³€ê²½
5. â³ í•˜ë“œì½”ë”© ìƒí’ˆ ë°ì´í„°ë¥¼ DBë¡œ ë§ˆì´ê·¸ë ˆì´ì…˜
6. â³ QR ì‹œìŠ¤í…œê³¼ ìƒí’ˆ DB ì—°ë™

---

**ì„¤ì¹˜ ì™„ë£Œ í›„ ì´ ë¬¸ì„œë¥¼ ì°¸ê³ í•˜ì—¬ ìƒí’ˆì„ ê´€ë¦¬í•˜ì„¸ìš”!** ğŸ‰

