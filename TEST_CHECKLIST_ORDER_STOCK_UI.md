# 주문/재고 UI 개편 테스트 체크리스트

## ✅ 완료된 작업

1. **주문 상세 UI 개편**
   - 백엔드 API: `order_item_units`, 인보이스 정보 추가
   - 프론트엔드: `order_item_units` 테이블, shipped/delivered 버튼, 인보이스 카드 추가

2. **재고 관리 UI 개선**
   - 백엔드 API: `reserved_at`, `sold_at` 반환 (이미 구현됨)
   - 프론트엔드: `reserved_at`, `sold_at` 컬럼 추가, 토큰 복사 버튼 추가

---

## 📋 테스트 체크리스트

### 1️⃣ 주문 상세 UI 테스트

#### A. 주문 상세 화면 접근
- [ ] 관리자 페이지 → 주문 관리 화면 접속
- [ ] 주문 목록에서 주문 선택 → "상세" 버튼 클릭
- [ ] 주문 상세 모달이 정상적으로 열리는지 확인

#### B. 주문 정보 카드 (A) 확인
- [ ] 주문번호, 주문자, 주소, 결제 상태, 총액이 표시되는지 확인
- [ ] 기존과 동일하게 표시되는지 확인

#### C. 인보이스 정보 카드 (B) 확인 ⭐
- [ ] 주문 요약 카드 바로 아래에 인보이스 정보 카드가 표시되는지 확인
- [ ] 인보이스가 있는 주문:
  - [ ] 인보이스 번호 표시
  - [ ] 발급 일시 표시
  - [ ] 총액 표시
  - [ ] [인보이스 보기] 링크 표시 (있는 경우)
- [ ] 인보이스가 없는 주문:
  - [ ] 인보이스 정보 카드가 표시되지 않는지 확인

#### D. 상품 라인 (C) 확인
- [ ] 주문 상품 테이블이 표시되는지 확인
- [ ] 상품명, 사이즈, 색상, 수량, 가격이 표시되는지 확인
- [ ] ❌ 여기에 출고/배송 버튼이 **없는지** 확인 (중요!)

#### E. 출고/배송 유닛 테이블 (D) 확인 ⭐⭐⭐
- [ ] 주문 상품 테이블 아래에 "출고/배송 유닛" 테이블이 표시되는지 확인
- [ ] 테이블 컬럼 확인:
  - [ ] 체크박스 컬럼
  - [ ] 유닛 ID
  - [ ] 상품명
  - [ ] 사이즈
  - [ ] 색상
  - [ ] 내부 코드
  - [ ] 토큰 (마스킹: `ABC1...5678` 형식)
  - [ ] 시리얼 넘버
  - [ ] 상태 (색상 뱃지: reserved=주황, shipped=파랑, delivered=초록)
  - [ ] 택배사
  - [ ] 송장번호
  - [ ] 출고일
  - [ ] 배송완료일
- [ ] 상태별 색상 뱃지 확인:
  - [ ] `reserved`: 주황색 뱃지 "예약됨"
  - [ ] `shipped`: 파란색 뱃지 "출고됨"
  - [ ] `delivered`: 초록색 뱃지 "배송완료"
- [ ] shipped/delivered된 행의 체크박스가 비활성화되어 있는지 확인
- [ ] 송장번호가 있을 때:
  - [ ] 송장번호가 링크로 표시되는지 확인
  - [ ] 링크 클릭 시 새 창에서 택배사 추적 페이지가 열리는지 확인

#### F. 액션 버튼 (E) 테스트 ⭐⭐⭐

**출고 처리 버튼 테스트:**
- [ ] "출고/배송 유닛" 테이블 하단에 [출고 처리] 버튼이 있는지 확인
- [ ] 초기 상태: 버튼이 비활성화(disabled)되어 있는지 확인
- [ ] reserved 상태 유닛 선택:
  - [ ] reserved 상태 유닛의 체크박스 선택
  - [ ] [출고 처리] 버튼이 활성화되는지 확인
  - [ ] [출고 처리] 버튼 클릭
  - [ ] 택배사 코드 입력 (예: CJ, ILYANG, KGB)
  - [ ] 송장번호 입력
  - [ ] 확인 버튼 클릭
  - [ ] API 호출 성공 확인
  - [ ] 주문 상세 화면이 새로고침되는지 확인
  - [ ] 선택한 유닛의 상태가 "출고됨"으로 변경되는지 확인
  - [ ] 택배사, 송장번호, 출고일이 채워지는지 확인
- [ ] shipped/delivered 상태 유닛 선택:
  - [ ] shipped 또는 delivered 상태 유닛만 선택
  - [ ] [출고 처리] 버튼이 **비활성화**되어 있는지 확인

**배송완료 처리 버튼 테스트:**
- [ ] [배송완료 처리] 버튼이 있는지 확인
- [ ] 초기 상태: 버튼이 비활성화(disabled)되어 있는지 확인
- [ ] shipped 상태 유닛 선택:
  - [ ] shipped 상태 유닛의 체크박스 선택
  - [ ] [배송완료 처리] 버튼이 활성화되는지 확인
  - [ ] [배송완료 처리] 버튼 클릭
  - [ ] 확인 버튼 클릭
  - [ ] API 호출 성공 확인
  - [ ] 주문 상세 화면이 새로고침되는지 확인
  - [ ] 선택한 유닛의 상태가 "배송완료"로 변경되는지 확인
  - [ ] 배송완료일이 채워지는지 확인
- [ ] reserved/delivered 상태 유닛 선택:
  - [ ] reserved 또는 delivered 상태 유닛만 선택
  - [ ] [배송완료 처리] 버튼이 **비활성화**되어 있는지 확인

**전체 선택/해제 테스트:**
- [ ] 테이블 헤더의 전체 선택 체크박스 클릭
  - [ ] 모든 활성화된 체크박스가 선택되는지 확인
  - [ ] 다시 클릭하면 모두 해제되는지 확인
- [ ] shipped/delivered된 행은 전체 선택/해제에 포함되지 않는지 확인

---

### 2️⃣ 재고 관리 UI 테스트

#### A. 재고 목록 화면 접근
- [ ] 관리자 페이지 → 재고 관리 화면 접속
- [ ] 재고 목록 테이블이 정상적으로 표시되는지 확인

#### B. 테이블 컬럼 확인
- [ ] 테이블 헤더 컬럼 확인:
  - [ ] 재고 ID
  - [ ] 상품명
  - [ ] 사이즈
  - [ ] 색상
  - [ ] 토큰
  - [ ] 내부 코드
  - [ ] 시리얼 넘버
  - [ ] 상태
  - [ ] 예약 주문
  - [ ] **예약일시** ⭐ (새로 추가)
  - [ ] **판매일시** ⭐ (새로 추가)
  - [ ] 생성일
  - [ ] 액션

#### C. 예약일시 / 판매일시 컬럼 확인 ⭐
- [ ] 예약일시 컬럼:
  - [ ] `reserved` 상태인 재고: 예약일시가 표시되는지 확인
  - [ ] `in_stock` 상태인 재고: "-"로 표시되는지 확인
- [ ] 판매일시 컬럼:
  - [ ] `sold` 상태인 재고: 판매일시가 표시되는지 확인
  - [ ] `in_stock`, `reserved` 상태인 재고: "-"로 표시되는지 확인

#### D. 토큰 복사 버튼 테스트 ⭐
- [ ] 토큰 컬럼에 토큰 (마스킹) + [복사] + [전체 복사] 버튼이 있는지 확인
- [ ] **마스킹 복사 버튼**:
  - [ ] [복사] 버튼 클릭
  - [ ] 클립보드에 마스킹된 토큰 (예: `ABC1...5678`)이 복사되는지 확인
- [ ] **전체 토큰 복사 버튼**:
  - [ ] [전체 복사] 버튼 클릭
  - [ ] 확인 대화상자가 나타나는지 확인
    - [ ] "전체 토큰은 외부 유출 금지. 그래도 복사하시겠습니까?" 메시지 확인
  - [ ] 확인 버튼 클릭
  - [ ] 클립보드에 전체 토큰이 복사되는지 확인
  - [ ] 취소 버튼 클릭 시 복사가 되지 않는지 확인

#### E. 재고 상세 화면 확인
- [ ] 재고 목록에서 "상세" 버튼 클릭
- [ ] 재고 상세 모달이 정상적으로 열리는지 확인
- [ ] 예약일시, 판매일시가 정상적으로 표시되는지 확인 (기존에 이미 구현되어 있었음)

---

## 🐛 주의사항

### 주문 상세 UI
1. **order_item_units 데이터가 없는 주문**:
   - [ ] `order_item_units` 테이블이 표시되지 않는지 확인
   - [ ] 에러가 발생하지 않는지 확인

2. **부분 출고/배송**:
   - [ ] 여러 유닛 중 일부만 선택하여 출고 처리
   - [ ] 선택한 유닛만 상태가 변경되는지 확인

3. **에러 처리**:
   - [ ] 출고 처리 시 잘못된 택배사 코드 입력 → 에러 메시지 확인
   - [ ] 배송완료 처리 시 API 에러 → 에러 메시지 확인

### 재고 관리 UI
1. **토큰 복사**:
   - [ ] 클립보드 API 권한이 없는 경우 → 에러 메시지 확인
   - [ ] 토큰이 NULL인 경우 → 에러 메시지 확인

2. **날짜 포맷**:
   - [ ] 예약일시, 판매일시가 한국 시간 형식으로 표시되는지 확인

---

## 📊 테스트 시나리오

### 시나리오 1: 정상 주문 출고 처리
1. 주문 관리 화면 접속
2. `reserved` 상태 유닛이 있는 주문 선택
3. 주문 상세 모달 열기
4. `order_item_units` 테이블 확인
5. reserved 상태 유닛 1개 선택
6. [출고 처리] 버튼 클릭
7. 택배사 코드 입력 (예: CJ)
8. 송장번호 입력
9. 확인
10. 성공 메시지 확인
11. 주문 상세 화면 새로고침 확인
12. 선택한 유닛 상태가 "출고됨"으로 변경 확인

### 시나리오 2: 배송완료 처리
1. `shipped` 상태 유닛이 있는 주문 선택
2. 주문 상세 모달 열기
3. shipped 상태 유닛 1개 선택
4. [배송완료 처리] 버튼 클릭
5. 확인
6. 성공 메시지 확인
7. 선택한 유닛 상태가 "배송완료"로 변경 확인

### 시나리오 3: 재고 목록 확인
1. 재고 관리 화면 접속
2. 예약일시, 판매일시 컬럼 확인
3. reserved 상태 재고: 예약일시 표시 확인
4. sold 상태 재고: 판매일시 표시 확인
5. 토큰 복사 버튼 클릭 테스트

---

## ✅ 테스트 완료 기준

- [ ] 모든 체크리스트 항목 테스트 완료
- [ ] 에러 없이 정상 동작 확인
- [ ] UI/UX가 예상대로 동작하는지 확인
- [ ] 백엔드 API와 프론트엔드가 정상적으로 연동되는지 확인
